{"ast":null,"code":"import{ORDER_CREATE_FAIL,ORDER_CREATE_REQUEST,ORDER_CREATE_SUCCESS,ORDER_DETAILS_FAIL,ORDER_DETAILS_REQUEST,ORDER_DETAILS_SUCCESS,ORDER_LIST_MY_FAIL,ORDER_LIST_MY_REQUEST,ORDER_LIST_MY_SUCCESS,ORDER_PAY_FAIL,ORDER_PAY_REQUEST,ORDER_PAY_SUCCESS}from\"../Constants/OrderConstants\";import axios from\"axios\";import{CART_CLEAR_ITEMS}from\"../Constants/CartConstants\";import{logout}from\"./userActions\";// CREATE ORDER\nexport const createOrder=order=>async(dispatch,getState)=>{try{dispatch({type:ORDER_CREATE_REQUEST});const{userLogin:{userInfo}}=getState();const config={headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(userInfo.token)}};const{data}=await axios.post(\"/api/orders\",order,config);dispatch({type:ORDER_CREATE_SUCCESS,payload:data});dispatch({type:CART_CLEAR_ITEMS,payload:data});localStorage.removeItem(\"cartItems\");}catch(error){const message=error.response&&error.response.data.message?error.response.data.message:error.message;if(message===\"Not authorized, token failed\"){dispatch(logout());}dispatch({type:ORDER_CREATE_FAIL,payload:message});}};// ORDER DETAILS\nexport const getOrderDetails=id=>async(dispatch,getState)=>{try{dispatch({type:ORDER_DETAILS_REQUEST});const{userLogin:{userInfo}}=getState();const config={headers:{Authorization:\"Bearer \".concat(userInfo.token)}};const{data}=await axios.get(\"/api/orders/\".concat(id),config);dispatch({type:ORDER_DETAILS_SUCCESS,payload:data});}catch(error){const message=error.response&&error.response.data.message?error.response.data.message:error.message;if(message===\"Not authorized, token failed\"){dispatch(logout());}dispatch({type:ORDER_DETAILS_FAIL,payload:message});}};// ORDER PAY\nexport const payOrder=(orderId,paymentResult)=>async(dispatch,getState)=>{try{dispatch({type:ORDER_PAY_REQUEST});const{userLogin:{userInfo}}=getState();const config={headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(userInfo.token)}};const{data}=await axios.put(\"/api/orders/\".concat(orderId,\"/pay\"),paymentResult,config);dispatch({type:ORDER_PAY_SUCCESS,payload:data});}catch(error){const message=error.response&&error.response.data.message?error.response.data.message:error.message;if(message===\"Not authorized, token failed\"){dispatch(logout());}dispatch({type:ORDER_PAY_FAIL,payload:message});}};// USER ORDERS\nexport const listMyOrders=()=>async(dispatch,getState)=>{try{dispatch({type:ORDER_LIST_MY_REQUEST});const{userLogin:{userInfo}}=getState();const config={headers:{Authorization:\"Bearer \".concat(userInfo.token)}};const{data}=await axios.get(\"/api/orders/\",config);dispatch({type:ORDER_LIST_MY_SUCCESS,payload:data});}catch(error){const message=error.response&&error.response.data.message?error.response.data.message:error.message;if(message===\"Not authorized, token failed\"){dispatch(logout());}dispatch({type:ORDER_LIST_MY_FAIL,payload:message});}};","map":{"version":3,"names":["ORDER_CREATE_FAIL","ORDER_CREATE_REQUEST","ORDER_CREATE_SUCCESS","ORDER_DETAILS_FAIL","ORDER_DETAILS_REQUEST","ORDER_DETAILS_SUCCESS","ORDER_LIST_MY_FAIL","ORDER_LIST_MY_REQUEST","ORDER_LIST_MY_SUCCESS","ORDER_PAY_FAIL","ORDER_PAY_REQUEST","ORDER_PAY_SUCCESS","axios","CART_CLEAR_ITEMS","logout","createOrder","order","dispatch","getState","type","userLogin","userInfo","config","headers","Authorization","concat","token","data","post","payload","localStorage","removeItem","error","message","response","getOrderDetails","id","get","payOrder","orderId","paymentResult","put","listMyOrders"],"sources":["C:/Users/nsahe/Desktop/Sylitech Project/frontend/src/Redux/Actions/OrderActions.js"],"sourcesContent":["import {\r\n  ORDER_CREATE_FAIL,\r\n  ORDER_CREATE_REQUEST,\r\n  ORDER_CREATE_SUCCESS,\r\n  ORDER_DETAILS_FAIL,\r\n  ORDER_DETAILS_REQUEST,\r\n  ORDER_DETAILS_SUCCESS,\r\n  ORDER_LIST_MY_FAIL,\r\n  ORDER_LIST_MY_REQUEST,\r\n  ORDER_LIST_MY_SUCCESS,\r\n  ORDER_PAY_FAIL,\r\n  ORDER_PAY_REQUEST,\r\n  ORDER_PAY_SUCCESS,\r\n} from \"../Constants/OrderConstants\";\r\nimport axios from \"axios\";\r\nimport { CART_CLEAR_ITEMS } from \"../Constants/CartConstants\";\r\nimport { logout } from \"./userActions\";\r\n\r\n// CREATE ORDER\r\nexport const createOrder = (order) => async (dispatch, getState) => {\r\n  try {\r\n    dispatch({ type: ORDER_CREATE_REQUEST });\r\n\r\n    const {\r\n      userLogin: { userInfo },\r\n    } = getState();\r\n\r\n    const config = {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${userInfo.token}`,\r\n      },\r\n    };\r\n\r\n    const { data } = await axios.post(`/api/orders`, order, config);\r\n    dispatch({ type: ORDER_CREATE_SUCCESS, payload: data });\r\n    dispatch({ type: CART_CLEAR_ITEMS, payload: data });\r\n\r\n    localStorage.removeItem(\"cartItems\");\r\n  } catch (error) {\r\n    const message =\r\n      error.response && error.response.data.message\r\n        ? error.response.data.message\r\n        : error.message;\r\n    if (message === \"Not authorized, token failed\") {\r\n      dispatch(logout());\r\n    }\r\n    dispatch({\r\n      type: ORDER_CREATE_FAIL,\r\n      payload: message,\r\n    });\r\n  }\r\n};\r\n\r\n// ORDER DETAILS\r\nexport const getOrderDetails = (id) => async (dispatch, getState) => {\r\n  try {\r\n    dispatch({ type: ORDER_DETAILS_REQUEST });\r\n\r\n    const {\r\n      userLogin: { userInfo },\r\n    } = getState();\r\n\r\n    const config = {\r\n      headers: {\r\n        Authorization: `Bearer ${userInfo.token}`,\r\n      },\r\n    };\r\n\r\n    const { data } = await axios.get(`/api/orders/${id}`, config);\r\n    dispatch({ type: ORDER_DETAILS_SUCCESS, payload: data });\r\n  } catch (error) {\r\n    const message =\r\n      error.response && error.response.data.message\r\n        ? error.response.data.message\r\n        : error.message;\r\n    if (message === \"Not authorized, token failed\") {\r\n      dispatch(logout());\r\n    }\r\n    dispatch({\r\n      type: ORDER_DETAILS_FAIL,\r\n      payload: message,\r\n    });\r\n  }\r\n};\r\n\r\n// ORDER PAY\r\nexport const payOrder =\r\n  (orderId, paymentResult) => async (dispatch, getState) => {\r\n    try {\r\n      dispatch({ type: ORDER_PAY_REQUEST });\r\n\r\n      const {\r\n        userLogin: { userInfo },\r\n      } = getState();\r\n\r\n      const config = {\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${userInfo.token}`,\r\n        },\r\n      };\r\n\r\n      const { data } = await axios.put(\r\n        `/api/orders/${orderId}/pay`,\r\n        paymentResult,\r\n        config\r\n      );\r\n      dispatch({ type: ORDER_PAY_SUCCESS, payload: data });\r\n    } catch (error) {\r\n      const message =\r\n        error.response && error.response.data.message\r\n          ? error.response.data.message\r\n          : error.message;\r\n      if (message === \"Not authorized, token failed\") {\r\n        dispatch(logout());\r\n      }\r\n      dispatch({\r\n        type: ORDER_PAY_FAIL,\r\n        payload: message,\r\n      });\r\n    }\r\n  };\r\n\r\n// USER ORDERS\r\nexport const listMyOrders = () => async (dispatch, getState) => {\r\n  try {\r\n    dispatch({ type: ORDER_LIST_MY_REQUEST });\r\n\r\n    const {\r\n      userLogin: { userInfo },\r\n    } = getState();\r\n\r\n    const config = {\r\n      headers: {\r\n        Authorization: `Bearer ${userInfo.token}`,\r\n      },\r\n    };\r\n\r\n    const { data } = await axios.get(`/api/orders/`, config);\r\n    dispatch({ type: ORDER_LIST_MY_SUCCESS, payload: data });\r\n  } catch (error) {\r\n    const message =\r\n      error.response && error.response.data.message\r\n        ? error.response.data.message\r\n        : error.message;\r\n    if (message === \"Not authorized, token failed\") {\r\n      dispatch(logout());\r\n    }\r\n    dispatch({\r\n      type: ORDER_LIST_MY_FAIL,\r\n      payload: message,\r\n    });\r\n  }\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}