{"ast":null,"code":"import axios from\"axios\";import{PRODUCT_CREATE_REVIEW_FAIL,PRODUCT_CREATE_REVIEW_REQUEST,PRODUCT_CREATE_REVIEW_SUCCESS,PRODUCT_DETAILS_FAIL,PRODUCT_DETAILS_REQUEST,PRODUCT_DETAILS_SUCCESS,PRODUCT_LIST_FAIL,PRODUCT_LIST_REQUEST,PRODUCT_LIST_SUCCESS}from\"../Constants/ProductConstants\";import{logout}from\"./userActions\";// PRODUCT LIST\nexport const listProduct=function(){let keyword=arguments.length>0&&arguments[0]!==undefined?arguments[0]:\" \";let pageNumber=arguments.length>1&&arguments[1]!==undefined?arguments[1]:\" \";return async dispatch=>{try{dispatch({type:PRODUCT_LIST_REQUEST});const{data}=await axios.get(\"/api/products?keyword=\".concat(keyword,\"&pageNumber=\").concat(pageNumber));dispatch({type:PRODUCT_LIST_SUCCESS,payload:data});}catch(error){dispatch({type:PRODUCT_LIST_FAIL,payload:error.response&&error.response.data.message?error.response.data.message:error.message});}};};// SINGLE PRODUCT\nexport const listProductDetails=id=>async dispatch=>{try{dispatch({type:PRODUCT_DETAILS_REQUEST});const{data}=await axios.get(\"/api/products/\".concat(id));dispatch({type:PRODUCT_DETAILS_SUCCESS,payload:data});}catch(error){dispatch({type:PRODUCT_DETAILS_FAIL,payload:error.response&&error.response.data.message?error.response.data.message:error.message});}};// PRODUCT REVIEW CREATE\nexport const createProductReview=(productId,review)=>async(dispatch,getState)=>{try{dispatch({type:PRODUCT_CREATE_REVIEW_REQUEST});const{userLogin:{userInfo}}=getState();const config={headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(userInfo.token)}};await axios.post(\"/api/products/\".concat(productId,\"/review\"),review,config);dispatch({type:PRODUCT_CREATE_REVIEW_SUCCESS});}catch(error){const message=error.response&&error.response.data.message?error.response.data.message:error.message;if(message===\"Not authorized, token failed\"){dispatch(logout());}dispatch({type:PRODUCT_CREATE_REVIEW_FAIL,payload:message});}};","map":{"version":3,"names":["axios","PRODUCT_CREATE_REVIEW_FAIL","PRODUCT_CREATE_REVIEW_REQUEST","PRODUCT_CREATE_REVIEW_SUCCESS","PRODUCT_DETAILS_FAIL","PRODUCT_DETAILS_REQUEST","PRODUCT_DETAILS_SUCCESS","PRODUCT_LIST_FAIL","PRODUCT_LIST_REQUEST","PRODUCT_LIST_SUCCESS","logout","listProduct","keyword","arguments","length","undefined","pageNumber","dispatch","type","data","get","concat","payload","error","response","message","listProductDetails","id","createProductReview","productId","review","getState","userLogin","userInfo","config","headers","Authorization","token","post"],"sources":["C:/Users/nsahe/Desktop/LEVEL 400/Full-SorceCode-ShoeShop-Ecommerce-Web-main/client frontend/src/Redux/Actions/ProductActions.js"],"sourcesContent":["import axios from \"axios\";\r\nimport {\r\n  PRODUCT_CREATE_REVIEW_FAIL,\r\n  PRODUCT_CREATE_REVIEW_REQUEST,\r\n  PRODUCT_CREATE_REVIEW_SUCCESS,\r\n  PRODUCT_DETAILS_FAIL,\r\n  PRODUCT_DETAILS_REQUEST,\r\n  PRODUCT_DETAILS_SUCCESS,\r\n  PRODUCT_LIST_FAIL,\r\n  PRODUCT_LIST_REQUEST,\r\n  PRODUCT_LIST_SUCCESS,\r\n} from \"../Constants/ProductConstants\";\r\nimport { logout } from \"./userActions\";\r\n\r\n// PRODUCT LIST\r\nexport const listProduct =\r\n  (keyword = \" \", pageNumber = \" \") =>\r\n  async (dispatch) => {\r\n    try {\r\n      dispatch({ type: PRODUCT_LIST_REQUEST });\r\n      const { data } = await axios.get(\r\n        `/api/products?keyword=${keyword}&pageNumber=${pageNumber}`\r\n      );\r\n      dispatch({ type: PRODUCT_LIST_SUCCESS, payload: data });\r\n    } catch (error) {\r\n      dispatch({\r\n        type: PRODUCT_LIST_FAIL,\r\n        payload:\r\n          error.response && error.response.data.message\r\n            ? error.response.data.message\r\n            : error.message,\r\n      });\r\n    }\r\n  };\r\n\r\n// SINGLE PRODUCT\r\nexport const listProductDetails = (id) => async (dispatch) => {\r\n  try {\r\n    dispatch({ type: PRODUCT_DETAILS_REQUEST });\r\n    const { data } = await axios.get(`/api/products/${id}`);\r\n    dispatch({ type: PRODUCT_DETAILS_SUCCESS, payload: data });\r\n  } catch (error) {\r\n    dispatch({\r\n      type: PRODUCT_DETAILS_FAIL,\r\n      payload:\r\n        error.response && error.response.data.message\r\n          ? error.response.data.message\r\n          : error.message,\r\n    });\r\n  }\r\n};\r\n\r\n// PRODUCT REVIEW CREATE\r\nexport const createProductReview =\r\n  (productId, review) => async (dispatch, getState) => {\r\n    try {\r\n      dispatch({ type: PRODUCT_CREATE_REVIEW_REQUEST });\r\n\r\n      const {\r\n        userLogin: { userInfo },\r\n      } = getState();\r\n\r\n      const config = {\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${userInfo.token}`,\r\n        },\r\n      };\r\n\r\n      await axios.post(`/api/products/${productId}/review`, review, config);\r\n      dispatch({ type: PRODUCT_CREATE_REVIEW_SUCCESS });\r\n    } catch (error) {\r\n      const message =\r\n        error.response && error.response.data.message\r\n          ? error.response.data.message\r\n          : error.message;\r\n      if (message === \"Not authorized, token failed\") {\r\n        dispatch(logout());\r\n      }\r\n      dispatch({\r\n        type: PRODUCT_CREATE_REVIEW_FAIL,\r\n        payload: message,\r\n      });\r\n    }\r\n  };\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}